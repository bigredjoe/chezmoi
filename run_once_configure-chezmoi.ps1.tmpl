{{ if eq .chezmoi.os "windows" }}
# PowerShell script to initialize chezmoi configuration

$ConfigDir = Join-Path $env:APPDATA "chezmoi"
$ConfigFile = Join-Path $ConfigDir "chezmoi.toml"

# Create config directory if it doesn't exist
if (-not (Test-Path $ConfigDir)) {
    New-Item -ItemType Directory -Path $ConfigDir | Out-Null
}

# Only copy the template if the config file doesn't exist
if (-not (Test-Path $ConfigFile)) {
    Write-Host "Initializing chezmoi configuration..."
    $TemplateContent = chezmoi execute-template < "{{ .chezmoi.sourceDir }}\.chezmoi.toml.tmpl"
    $TemplateContent | Out-File -FilePath $ConfigFile -Encoding UTF8
    Write-Host "Created default chezmoi configuration at $ConfigFile"
}
{{ end }} 